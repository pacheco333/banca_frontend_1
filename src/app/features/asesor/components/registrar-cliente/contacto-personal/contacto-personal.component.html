<div class="p-6 max-w-7xl mx-auto bg-white shadow-sm rounded-lg border border-gray-200">
  <form [formGroup]="form" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

      <!-- Dirección -->
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Dirección <span class="text-red-500">*</span>
        </label>
        <input id="direccion" type="text" formControlName="direccion" (keydown)="onEnterKey($event, 'barrio')"
          maxlength="200"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Ej: Calle 123 #45-67">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('direccion')?.invalid && form.get('direccion')?.touched">
          <span *ngIf="form.get('direccion')?.errors?.['required']">Campo obligatorio (mínimo 5 caracteres)</span>
          <span *ngIf="form.get('direccion')?.errors?.['minlength']">Mínimo 5 caracteres</span>
          <span *ngIf="form.get('direccion')?.errors?.['maxlength']">Máximo 200 caracteres</span>
        </div>
      </div>

      <!-- Barrio -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Barrio <span class="text-red-500">*</span>
        </label>
        <input id="barrio" type="text" formControlName="barrio" (keypress)="alfanumerico($event)"
          (keydown)="onEnterKey($event, 'bloqueTorre')" maxlength="100"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Ej: Centro">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('barrio')?.invalid && form.get('barrio')?.touched">
          <span *ngIf="form.get('barrio')?.errors?.['required']">Campo obligatorio (mínimo 2 caracteres)</span>
          <span *ngIf="form.get('barrio')?.errors?.['minlength']">Mínimo 2 caracteres</span>
          <span *ngIf="form.get('barrio')?.errors?.['pattern']">Solo letras, números y espacios</span>
        </div>
      </div>

      <!-- Bloque/Torre -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Bloque/Torre
        </label>
        <input id="bloqueTorre" type="text" formControlName="bloqueTorre" (keypress)="alfanumerico($event)"
          (keydown)="onEnterKey($event, 'aptoCasa')" maxlength="50"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Opcional">
        <div class="text-red-500 text-xs mt-1"
          *ngIf="form.get('bloqueTorre')?.invalid && form.get('bloqueTorre')?.touched">
          <span *ngIf="form.get('bloqueTorre')?.errors?.['maxlength']">Máximo 50 caracteres</span>
          <span *ngIf="form.get('bloqueTorre')?.errors?.['pattern']">Solo letras, números y espacios</span>
        </div>
      </div>

      <!-- Apto/Casa -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Apto/Casa
        </label>
        <input id="aptoCasa" type="text" formControlName="aptoCasa" (keypress)="alfanumerico($event)"
          (keydown)="onEnterKey($event, 'departamento')" maxlength="50"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Opcional">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('aptoCasa')?.invalid && form.get('aptoCasa')?.touched">
          <span *ngIf="form.get('aptoCasa')?.errors?.['maxlength']">Máximo 50 caracteres</span>
          <span *ngIf="form.get('aptoCasa')?.errors?.['pattern']">Solo letras, números y espacios</span>
        </div>
      </div>

      <!-- Tipo de País -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          ¿Reside en Colombia? <span class="text-red-500">*</span>
        </label>
        <select formControlName="tipoPais"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="Colombia">Sí, soy colombiano</option>
          <option value="Otro">No, soy de otro país</option>
        </select>
      </div>

      <!-- País (solo si NO es Colombia) -->
      <div *ngIf="!esColombia()">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          País <span class="text-red-500">*</span>
        </label>
        <input type="text" formControlName="pais" (keypress)="soloLetras($event)" maxlength="100"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Escribe tu país">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('pais')?.invalid && form.get('pais')?.touched">
          Campo obligatorio
        </div>
      </div>

      <!-- Departamento -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Departamento/Estado <span class="text-red-500">*</span>
        </label>

        <!-- SELECT para Colombia -->
        <ng-select *ngIf="esColombia()" [items]="departamentos" formControlName="departamento"
          placeholder="Selecciona un departamento" [searchable]="true" [clearable]="true" class="custom-ng-select">
        </ng-select>

        <!-- INPUT para otros países -->
        <input *ngIf="!esColombia()" type="text" formControlName="departamento" (keypress)="soloLetras($event)"
          maxlength="100"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Escribe el departamento/estado">

        <div class="text-red-500 text-xs mt-1"
          *ngIf="form.get('departamento')?.invalid && form.get('departamento')?.touched">
          Campo obligatorio
        </div>
      </div>

      <!-- Ciudad -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Ciudad <span class="text-red-500">*</span>
        </label>

        <!-- SELECT para Colombia -->
        <ng-select *ngIf="esColombia()" [items]="ciudades" formControlName="ciudad"
          placeholder="Primero selecciona un departamento" [searchable]="true" [clearable]="true"
          class="custom-ng-select">
        </ng-select>

        <!-- INPUT para otros países -->
        <input *ngIf="!esColombia()" type="text" formControlName="ciudad" (keypress)="soloLetras($event)"
          maxlength="100"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Escribe la ciudad">

        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('ciudad')?.invalid && form.get('ciudad')?.touched">
          Campo obligatorio
        </div>
      </div>



      <!-- Teléfono -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Teléfono <span class="text-red-500">*</span>
        </label>
        <input id="telefono" type="text" formControlName="telefono" (keypress)="soloNumeros($event)"
          (keydown)="onEnterKey($event, 'correo')" maxlength="15"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Ej: 3001234567">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('telefono')?.invalid && form.get('telefono')?.touched">
          <span *ngIf="form.get('telefono')?.errors?.['required']">Campo obligatorio (mínimo 7 dígitos)</span>
          <span *ngIf="form.get('telefono')?.errors?.['minlength']">Mínimo 7 dígitos</span>
          <span *ngIf="form.get('telefono')?.errors?.['maxlength']">Máximo 15 dígitos</span>
          <span *ngIf="form.get('telefono')?.errors?.['pattern']">Solo números</span>
        </div>
      </div>

      <!-- Correo Electrónico -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Correo Electrónico <span class="text-red-500">*</span>
        </label>
        <input id="correo" type="email" formControlName="correo" maxlength="100"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Ej: usuario@ejemplo.com">
        <div class="text-red-500 text-xs mt-1" *ngIf="form.get('correo')?.invalid && form.get('correo')?.touched">
          <span *ngIf="form.get('correo')?.errors?.['required']">Campo obligatorio</span>
          <span *ngIf="form.get('correo')?.errors?.['email'] || form.get('correo')?.errors?.['pattern']">Debe ser un
            correo válido</span>
        </div>
      </div>

    </div>

    <!-- Botón Guardar -->
    <div class="flex justify-end mt-6">
      <button type="button" (click)="guardarSeccion()" [disabled]="!form.valid" [class]="form.valid 
      ? 'px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors cursor-pointer' 
      : 'px-6 py-2 bg-gray-300 text-gray-500 font-medium rounded-lg cursor-not-allowed'">
        Guardar y Continuar
      </button>
    </div>

  </form>
</div>